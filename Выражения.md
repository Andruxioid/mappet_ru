Выражение это особая строка (или, если точнее, математическое выражение), которая позволяет проверить определённые условия. Выражения поддерживают все возможности математического парсера (обработчика данных) МакЛиба, который, в свою очередь, поддерживает элементарные арифметические действия (`+`, `-`, `*`, `/`), математические функции (`abs()`, `sin()`, `cos()`, `sqrt()`, и т.д.) и множество других вещей. Для более детальной информации, посетите [вот эту страницу](https://github.com/mchorse/aperture/wiki/Math-Expressions).

Кроме того, выражения поддерживают особенные механики, которые позволяют соединять и комбинировать их с другими механиками Маппета. Ниже предоставлен их полный список:

### Функции квестов

|Название и аргументы|Возвращаемое значение|
| ---------------- | ---------- |
|`quest_present(id, target)`|Возвращает булев если один из игроков, отмеченный селектором `target`, выполняет квест с ID `id`.|
|`quest_completed(id, target)`|Возвращает булев если один из игроков, отмеченный селектором `target`, уже выполнил квест с ID `id`. Также можно использовать `~`для аргумента `target`, дабы проверить был ли квест выполнен глобально.|
|`quest_present_or_completed(id)`|Возвращает булев если квест с ID `id` был завершён или выполняется одним из текущих игроков; полезно если хотите проверить не был ли раннее взят квест с ID `id`.|

### Функции фракций

|Название и аргументы|Возвращаемое значение|
| ---------------- | ---------- |
|`faction_friendly(id, target)`|Возвращает булев если очки фракции фракции с ID `id` игрока с селектором `target` устанавливают между ними доброжелательные отношения.|
|`faction_neutral(id, target)`|Возвращает булев если очки фракции фракции с ID `id` игрока с селектором `target` устанавливают между ними нейтральные отношения.|
|`faction_hostile(id, target)`|Возвращает булев если очки фракции фракции с ID `id` игрока с селектором `target` устанавливают между ними враждебные отношения.|
|`faction_has(id, target)`|Возвращает булев если игрок, отмеченный селектором `target`, имеет очки фракции с ID `id`.|
|`faction_score(id, target)`|Возвращает очки фракции с ID `id` одного игрока, отмеченного селектором `target`.|

### Функции состояний

|Название и аргументы|Возвращаемое значение|
| ---------------- | ---------- |
|`state(id[, target])`|Возвращает значение состояния с ID `id`. Если аргумент цели `target` был пропущен, то будет использовано либо глобальное состояние, либо состояние текущего субъекта. Если аргумент цели `target` был задан, то маппет попытается найти игрока с таким состоянием посредством селектора цели, либо с помощью `~` для глобального состояния.|

### Функции инвентаря игрока

|Название и аргументы|Возвращаемое значение|
| ---------------- | ---------- |
|`inv_has(item_id[, target, all])`|Возвращает булев если игрок(и) с селектором `target` имеет или имеют предмет с ID `item_id` у себя в инвентаре (а не в руках или в слоотах экипировки). `all` это булев, который означает, что наличие будет обязательно либо у всех игроков (значение `1`), либо только у одного (значение `0`).|
|`inv_holds(item_id[, target, all])`|Возвращает булев если игрок(и) с селектром `target` держит или держат предмет с ID `item_id` в главном или вспомогательном слоте руки.|
|`inv_armor(item_id[, target, all])`|Возвращает булев если игрок(и) с селектором `target` экипировал(и) предмет с ID `item_id` в любую из ячеек экипировки.|

### Функции игрока

|Название и аргументы|Возвращаемое значение|
| ---------------- | ---------- |
|`player_xp(target)`|Возвращает если у игрока всего `target` очков опыта.|
|`player_xp_level(target)`"|Возвращает если текущий уровень опыта у игрока составляет `target`.|
|`player_hp(target)`|Возвращает если у игрока на данный момент `target` очков здоровья.|
|`player_hunger(target)`|Возвращает если у игрока `target` очков голода.|
|`player_armor(target)`|Возвращает если у игрока `target` очков брони.|
|`player_is_alive(target)`|Возвращает если игроки являются `target`.|

### Функции диалогов

|Название и аргументы|Возвращаемое значение|
| ---------------- | ---------- |
|`dialogue_read(id, target)`|Возвращает если заданная цель `target` уже прочла диалог с ID `id`.|

### Функции мира

|Название и аргументы|Возвращаемое значение|
| ---------------- | ---------- |
|`world_time()`|Возвращает мировое время (т.е. то которое на самом деле день/ночь), если `1000` это день `day`, а `13000` это ночь `night`.|
|`world_total_time()`|Возвращает совокупное мировое время с начала инициализации мира.|
|`world_is_night()`|Возвращает булев если сейчас ночь (12000 - 24000).|
|`world_is_day()`|Возвращает булев если сейчас день (0 - 12000).|

**Примечание**: булев это либо `1` (true) либо `0` (false).
