NPC это сущности Маппета, которых можно использовать для целого вороха вещей. Они могут быть торговцами, собеседниками, квестодателями, спутниками, врагами, боссами и так далее. С ними вы можете делать так много всего, что все использования перечислить попросту невозможно. NPC используют морфы, что даёт вам право выбрать его внешний вид полностью на свое усмотрение.

NPC можно призвать командой `/mp npc summon`, или посредством инструмента NPC и редактировать используя команду `/mp npc` [команды](./Команды.md#mp-npc-state-target-state) или исполльзуя инструмент NPC.

NPC можно управлять в [главной панели Маппета](./Главная-панель-Маппета.md). Третья панель в левом боком меню открывает редактор NPC.

## Редактирование

Как только вы создадите или выберете NPC, перед вами появится вот такой редактор:

![Редактор NPC](https://i.imgur.com/mDe1NQt.png)

В нём вы можете редактировать параметры свойств и состояний каждого отдельного NPC. В этом редакторе вы, по сути, создаёте и настраиваете чертежи NPC дабы добиться от них желаемого поведения. 

### Главные опции

Вот описание того, за что отвечают главные опции:

* **Расстояние нахождения пути** позволяет установить максимальное расстояние пути по которому NPC будет идти в поисках своих целей в мире. Чем выше значение, тем больше нагрузка на центральный процессор.
* **Уникальный** (**ещё не используется**) в будущем позволит сделать NPC уникальным, означая то, что сервер возьмёт на себя обязанности по спавну этого NPC дабы с ним не возникло никаких инцидентов.

### Состояния

Слева от редактора главных опций вы увидите список состояний. Они позволят вам настроить разные варианты одного и того же NPC и потом сменять их используя [команду](./Команды.md#mp-npc-state-target-state) `/mp npc state`. Точно так же, как и в других модулях Маппета, вы можете кликнуть правой кнопкой мыши по списку чтобы добавить или удалить состояния, а также кликнуть по списку чтобы отредактировать состояние.

`default` это название состояния по умолчанию, использующегося всякий раз когда не указывается конкретное состояние NPC.

### Настройки

Здесь находится описание всех доступных настроек:

#### Общие настройки

* **Фракция** ID фракции, к которой принадлежит NPC.
* **Морф NPC** морф, который будет использовать NPC.
* **Дроп NPC** позволяет задать предметы, которые выпадут из NPC после его смерти. ➕ добавляет дроп, где вы можете добавить предметы и шанс дропа по шкале от `0` до `100`. Вы можете кликнуть правой кнопкой мыши в контекстном меню и удалить его.
* **Дроп опыта** позволяет установить количество опыта, выпадающее из сущности. Для большей информации о том, какое количество опыта каким сущностям ставить, посетите вот это [страницу](https://minecraft.fandom.com/ru/wiki/%D0%9E%D0%BF%D1%8B%D1%82).

#### Health options

* **Максимальное ХП** Определяет сколько очков здоровья будет у NPC. `2` это полное сердце (`20` это значение здоровья игрока по умолчанию).
* **Начальное ХП** определяет сколько очков здоровья будет у NPC на спавне. Естественно это значение не может быть больше значения **Максимального ХП**.
* **Задержка восстановления ХП** определяет сколько тиков (`20` тиков = `1` секунда) должно пройти перед тем как NPC начнёт восстанавливать по сердцу (т.т. после принятия урона).
* **Частота восстановления ХП** определяет через сколько тиков NPC восстановит себе все сердца.

#### Урон

* **Урон** определяет сколько сердец (без учёта брони) будет забирать атака NPC.
* **Урон от падения** определяет будет ли NPC получать урон от падения.
* **Урон от огня** определяет возможно ли нанести NPC урон огнём.
* **Неуязвимый** определяет возможно ли нанести NPC урон в принципе.
* **Смертный** определяет возможно ли убить NPC. При отключении этой опции, убить NPC можно будет только через команду `/kill`. Тем не менее, здоровье всё равно можно опустить атаками до уровня, близкого к `0`.

#### Передвижение

* **Скорость** определяет с какой скоростью NPC ходит, догоняе цели, патрулирует и т.д. `1` означает скорость обычной Майнкрафтовской ходьбы.
* **Может плавать** определяет может ли NPC находиться на поверхности воды.
* **Имеет пост** подключает логику постов. Когда этот параметр включён, NPC будут возвращаться на позицию, указанную под переключателем. Поле под позицией отвечает за радиус, в котором NPC разрешено свободно бродить до того, как он вернётся обратно на пост.
* **Точки патруля** под точками патруля вы можете установить точки, которые NPC будет должен патрулировать. ➕ справа от надписи позволяет добавить точку. При добавлении, точка возьмёт данные с текущей позиции игрока. Вы можете удалить точку правой кнопкой мыши посредством нажатия на ➖ **Удалить позицию блока** в контекстном меню.
* **Патрулирует по кругу** позволяет включить необходимость для NPC возвращаться на первую точку пути вместо того, чтобы просто идти назад. Скажем, у вас есть 3 точки. Если эта опция отключена, то NPC будет ходить по точкам в последовательности 1, 2, 3, 2, 1, 2, 3, и т.д., в то время как если параметр **Патрулирует по кругу** включён, то NPC будет ходить по точкам в последовательности 1, 2, 3, 1, 2, 3 и т.д.
* **Следовать за целью** позволяет ввести имя пользователя или `@r` для случайного игрока, за которым NPC должен следовать.

#### Поведение

* **Смотрит на игрока** будет ли NPC смотреть на игрока
* **Осматривается** будет ли NPC осматриваться по сторонам в состоянии бездействия
* **Бродит** будет ли NPC бродить туда-сюда по локации
* Напоследок у нас есть большой перечень [триггеров](./Триггер.md) на все случаи жизни:
    * **При инициализации NPC** срабатывающий когда NPC спавнится посредством команды или инструмента NPC.
    * **При взаимодействии с NPC** срабатывающий когда игрок кликает по NPC правой кнопкой мыши.
    * **При получении урона NPC** срабатывающий когда NPC получает урон.
    * **При смерти NPC** срабатывающий когда NPC умирает.
    * **На тике NPC** срабатывающий каждый тик существования NPC.
    * **На цели NPC** (**ещё не используется**) срабатывающий когда NPC нацеливается на сущность.


## Инструмент NPC

Инструмент NPC это предмет, находящийся в таблице Маппета режима творчества, который позволяет игроку упростить процесс редактирования и настройки NPC.

![Инструмент NPC](https://i.imgur.com/QV5SpBn.png)

Сперва, возьмите себе новый инструмент таблицы режима творчества; вам будет необходимо настроить инструмент кликнув правой кнопкой мыши с зажатой кнопкой Шифт. Появится вот такое меню: 

![Экран инструмента NPC](https://i.imgur.com/3h7vdTe.png)

Здесь вы можете выбрать ID NPC, которого вы хотите заспавнить и желаемое состояние этого самого NPC. Как только вы выберете ID и состояние, вы можете закрыть меню и кликнуть правой кнопкой мыши по земле, чтобы заспавнить NPC с выбранным ID и состоянием. 

Кроме того, вы также можете редактировать отдельные свойства NPC ровно так же, как в редакторе NPC:

![Редактор отдельных NPC](https://i.imgur.com/Ubct0va.png)

Как только вы закроете меню, NPC обновится.
