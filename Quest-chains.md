Цепочки квестов это особый тип данных, который использует нодовую систему (больше о системе нодов можно узнать на странице [нодов](https://github.com/Andruxioid/mappet_ru/blob/main/%D0%9D%D0%BE%D0%B4%D1%8B.md)) дабы отображать прогресс прохождения квестов. Цпочки квестов также используются в [системе диалогов](https://github.com/Andruxioid/mappet_ru/blob/main/%D0%94%D0%B8%D0%B0%D0%BB%D0%BE%D0%B3%D0%B8.md) дабы выдавать квесты [квесты](https://github.com/Andruxioid/mappet_ru/edit/main/%D0%9A%D0%B2%D0%B5%D1%81%D1%82%D1%8B.md) в диалогах.

Цепочками квестов можно управлять в [Главной панели Маппета](https://github.com/Andruxioid/mappet_ru/blob/main/%D0%93%D0%BB%D0%B0%D0%B2%D0%BD%D0%B0%D1%8F%20%D0%BF%D0%B0%D0%BD%D0%B5%D0%BB%D1%8C%20%D0%9C%D0%B0%D0%BF%D0%BF%D0%B5%D1%82%D0%B0.md). Последняя панель в левом боковом меню открывает редактор цепочек квестов.

## Редактирование

Как только вы создадите или выберете цепочку квестов, вы увидите вот такой редактор:

![Редактор цепочек квестов](https://i.imgur.com/xaR0gwu.png)

Работает он ровно так же, как работает редактор диалогов или нодов в целом, однако он в своей системе имеет единственный тип нода - нод квеста.

### Нод квеста

Once you select a quest node beside the common **Title** field, there are also three fields:

* Поле **Квест** определяет квест по заданному ID, которое будет будет использовано в диалоге.
* **Квестодатель**, фактически это ID NPC, в котором используется аргумент `[subject_id]` если диалог открывается посредством [команды](https://github.com/Andruxioid/mappet_ru/blob/main/%D0%9A%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D1%8B.md#%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D1%8B-%D0%B4%D0%B8%D0%B0%D0%BB%D0%BE%D0%B3%D0%BE%D0%B2) `/mp dialogue open`, что выдаст квест, означая, что вы сможете увидеть квест только если NPC или аргумент `[subject_id]` соответствует значению **Квестодателя**.
* **Квестополучатель** это та же штука, что и **Квестодатель**, единственное отличие которой в том, что она предназначена для завершения квестов, т.е. какой NPC/`[subject_id]` позволит сдать выполненный квест.

### Иерархия

Соединяя существующие ноды между собой, вы создаёте прогрессию по цепочке квестов. Ноды, у которых нету вводных соединений (соединений сверху), дают начало квестовым цепочкам, иными словами они являются первыми квестами в цепочках, в то время как все остальные квестовые цепочки после них открываются после того, как вы пройдёте квесты, от которых к дальнейшим цепочкам идут соединения.

Обратите внимание на следующую картинку:

![Пример цепочки квестов](https://i.imgur.com/FFei6X0.png)

В обоих случаях эти цепочки определённо будут работать, однако левая цепочка более читаема и интуитивна чем правая цепочка. 

* Левая цепочка читается как: завершите `da`, затем `test_nbt` а потом `test`, так вот это и работает.
* Правая цепочка читается как: завершите `easy`, затем `example`, а после этого `quest`, **ОДНАКО** вместо этого порядок на самом деле будет таковым: сначала `quest`, затем `example` и после него `easy`!

Так что, при привязке квестовых нодов, удостовертесь, что вы выбрали **первый нод снизу**, а только потом выбирайте верхний и привязывайте их только после того, как вы выбрали их именно в таком порядке.
