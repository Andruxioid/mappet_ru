Quests is a mechanism for to make players do something for a reward. You can use this mechanism to either reward player with cool loot, or immerse players into the lore through stories using quest chains.

Players can view currently taken quests in the player journal (`J` key by default) screen, quests can be taken and completed either through [dialogues](./Dialogues) and [quest chains](./Quest-chains) and `/mp quest` [subcommands](./Commands#quest-commands).

Quests can be managed in [Mappet dashboard](./Mappet-dashboard). The second panel in the left sidebar opens quest editor.

## Editing

Once you pick or create a quest, you'd see an editor like this:

![Quest editor](https://i.imgur.com/D4sDyQ1.png)

### Quest's title and description

Those two are self explanatory, they are quest's title and description. Title allows you to summarize the quest's gist in a couple of words, while the description allows you to dive deeper into the details of the quest like providing the details of where, what, who and etc. 

They will appear somewhat like this in the dialogue quests view:

![Quests](https://i.imgur.com/wkDLz7Q.png)

#### Description's formatting

Within description field you can use some simple formatting. Inputting `\n` counts as a newline, so if you want to start a new paragraph, you'll need two newline breaks like `\n\n`.

You can also use `[` as a substitute to `§` (section) symbol to do color formatting as described in Minecraft wiki's [Formatting codes](https://minecraft.fandom.com/wiki/Formatting_codes) page.

**Note**: these are true at the moment of current alpha.

### Cancelable 

Cancelable toggle determines whether quest can be declined by the player in the player journal. If the quest is not cancelable, then the decline button will be unclickable:

![Decline button is grayed out](https://i.imgur.com/mcmf7Mi.png)

### Задания

Задания это цели, которые вы даёте игроку, определяющие что должен делать игрок дабы завершить квест. На данный момент в моде доступны следующие типы заданий:

* **Цель по убийству**, это задание говорит игроку, что нужно убить определённое количество мобов
* **Цель по сбору**, это задание говорит игроку, что нужно приобрести определённый предмет

Вы можете добавлять задания, кликая на иконку ➕ справа от надписи **Задания**. После того, как вы кликнете, появится контекстное меню, где вы сможете выбрать необходимый вам тип задания. If you want to remove an objective, you can right click on its area, and pick the ➖ **Remove this objective** context menu item.

### Цель по убийству

У цели по убийству есть несколько полей, о которых вам надо знать. Среди таковых ID сущности, Количество и Соответствующий NBT.

Кнопка под надписью **Сущность** открывает меню, в котором находится список всех сущностей в игре. К примеру, если вы выберете `minecraft:pig`, то игроку нужно будет убить свинью. **Помните**, что не всех сущностей можно убить, это означает, что вы не сможете убить такие сущности как лодки, рамки и так далее, так что если вы выставляете сущность, в убиваемости которой вы не уверены, то лучше всё же проверить квест на работоспособность.

Поле под надписью **Счёт** устанавливает сколько сущностей с соответствующим ID сущностей и соответствующим NBT (если он есть) необходимо убить дабы считать заданную цель завершённой.

И, наконец, поле под надписью **Соответствующим NBT** позволяет вводить дополнительные данные NBT, которые будут сравниваться с данными убитой сущности. К примеру:

* Если вы хотите отметить в качестве цели зомби-малыша, то вам необходимо указать в меню выбора ID сущностей `minecraft:zombie` и `{IsBaby:1b}` в поле **Соответствующий NBT**.
* Если вы хотите отметить в качестве цели NPC Маппета с ID NPC `test`, то вам необходимо указать в меню выбора ID сущностей `mappet:npc` и `{NpcId:"test"}` в поле **Соответствующий NBT**.

**Совет от лошади™**: если вы хотите узнать Соответствующий NBT-тэг, то лучшим способом найти переменную будет убить необходимого моба, подобрать его морф и просмотреть его данные NBT, что вы можете сделать в редакторе морфов.

### Цель по сбору

Цель по сбору имеет только одно поле и это слот предмета; просто кликните на этот слот и ввыберите желаемый предмет. В таком случае, игроку нужно будет собрать непосредственно указанный предмет, в таком количестве, в котором это указано в правом нижнем углу предмета.

Помните, что если у предмета есть пользовательские данные NBT, то игроку будет необходимо собрать абсолютно тот же предмет; единственное, что не учитывается, это значение урона, наносимого предметом.

### Триггеры

И, наконец, последняя способность квестов это принимать, оклонять и завершать [triggers](https://github.com/Andruxioid/mappet_ru/blob/main/%D0%A2%D1%80%D0%B8%D0%B3%D0%B3%D0%B5%D1%80.md). 

Как обозначено названием, эти триггеры будут срабатывать когда игрок принимает квест, выданный ему посредством команды `/mp quest accept` или диалога, либо же когда он отклоняет его посредством команды `/mp quest decline` или из журнала игрока, либо же завершает квест посредством команды `/mp quest complete` или диалога.

## Механики

Стоит сказать, что у квестов есть всего одна специальная мехника, о которой вам нужно знать. 

**Как только игрок выполнит квест**, к особому состоянию, как глобальному так и состоянию игрока, с ID `quests.QUEST_ID`, будет добавлено `1`. Так что, если игрок завершил квест с ID `mchorse.intro`, то в таком случае, как к `~`, так и к состояниям игрока с ID `quests.mchorse.intro` добавляется `1` (вы можете проверить это посредством завершения квеста и исполнения команды `/mp print ~`, а потом команды `/mp print YOUR_USERNAME`).
